//requestp.js - A simple promise based wrapper around XMLHttpRequest
(function(){function e(a){return new Promise(function(d,b){var c=new XMLHttpRequest;if(a.headers)for(var g in a.headers)c.setRequestHeader(g,a.headers[g]);a.a&&c.overrideMimeType(a.a);a.b?c.open(a.method,a.url,!0,a.b,a.password):c.open(a.method,a.url,!0);c.onload=function(){200==c.status?d(c.response):b(Error(c.statusText))};c.onerror=function(a,c,d,g,h){b(h)};a.body?c.send(a.body):c.send()})};e.get=function(a,d,b){b=b||{};b.method="get";b.url=a;a=[];for(var c in d)a.push(encodeURIComponent(c)+"="+encodeURIComponent(d[c]));a.length&&(b.url+="?"+a.join("&"));return e(b)};e.post=function(a,d,b){b=b||{};b.method="post";b.url=a;if("string"==typeof d)b.body=d;else{a=[];for(var c in params)a.push(encodeURIComponent(c)+"="+encodeURIComponent(params[c]));a.length&&(b.body=a.join("&"))}return e(b)};window.requestp=e;})();
